<mat-toolbar class="fixed top-0 left-0 right-0 z-50 px-6 bg-[#24292f] shadow-md">
  <div class="flex items-center justify-between w-full max-w-7xl mx-auto py-2">
    <!-- Logo -->
    <div class="flex items-center">
      <a routerLink="/" class="flex items-center">
        <app-logo class="w-32"></app-logo>
      </a>
    </div>

    <!-- Desktop Menu (Hidden on Mobile) -->
    <nav class="hidden lg:flex items-center space-x-4">
      <a routerLink="/" class="text-gray-300 hover:text-white transition-colors px-3 py-2">Home</a>
      <a routerLink="/about" class="text-gray-300 hover:text-white transition-colors px-3 py-2">About</a>
      <a routerLink="/farmershub" class="text-gray-300 hover:text-white transition-colors px-3 py-2">Farmers Hub</a>
      <a routerLink="/contactus" class="text-gray-300 hover:text-white transition-colors px-3 py-2">Contact Us</a>
    </nav>

    <!-- Login/Register Buttons or Notification/Logout Buttons -->
    <div class="flex items-center space-x-4">
      <div class="hidden lg:flex items-center space-x-4">
        <!-- Show these buttons when user is NOT logged in -->
        <ng-container *ngIf="!isLoggedIn">
          <button routerLink="/login" class="text-[#2da44e] hover:text-white border border-[#2da44e] hover:bg-[#2da44e] font-medium rounded-md text-sm px-4 py-2 me-2 transition-colors">Login</button>
          <button routerLink="/register" class="text-white bg-[#2da44e] hover:bg-[#2c974b] font-medium rounded-md text-sm px-4 py-2 me-2 transition-colors">Register</button>
        </ng-container>
        <!-- Show these buttons when user is logged in -->
        <ng-container *ngIf="isLoggedIn">
          <button mat-icon-button [matMenuTriggerFor]="notificationMenu" class="relative text-gray-300 hover:text-white">
            <mat-icon>notifications</mat-icon>
            <span class="absolute -top-1 -right-1 bg-[#2da44e] text-white text-xs rounded-full h-5 w-5 flex items-center justify-center" *ngIf="notificationCount > 0">{{notificationCount}}</span>
          </button>
          <button (click)="logout()" class="text-white bg-transparent hover:bg-gray-600 font-medium rounded-md text-sm px-4 py-2">Logout</button>
        </ng-container>
      </div>
      <!-- Mobile Menu Button (Only Visible on Small Screens) -->
      <button mat-icon-button class="lg:hidden" *ngIf="isMobileView" (click)="toggleMobileMenu()">
        <mat-icon>menu</mat-icon>
      </button>
    </div>
  </div>
</mat-toolbar>

<!-- Mobile Menu (Hidden by Default) -->
<div *ngIf="isMobileMenuOpen" 
     class="fixed inset-0 z-40 bg-white lg:hidden">
  <div class="p-4">
    <!-- Close Button -->
    <div class="flex justify-end">
      <button mat-icon-button (click)="toggleMobileMenu()">
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <!-- Mobile Menu Links -->
    <nav class="flex flex-col space-y-4 mt-4">
      <a routerLink="/" class="text-gray-700 hover:text-[#2da44e] transition-colors py-2 px-3">Home</a>
      <a routerLink="/about" class="text-gray-700 hover:text-[#2da44e] transition-colors py-2 px-3">About</a>
      <a routerLink="/farmershub" class="text-gray-700 hover:text-[#2da44e] transition-colors py-2 px-3">Farmers Hub</a>
      <a routerLink="/" class="text-gray-700 hover:text-[#2da44e] transition-colors py-2 px-3">Contact Us</a>
    </nav>

    <!-- Mobile Login/Register or Notification/Logout Buttons -->
    <div class="flex flex-col space-y-2 pt-4">
      <ng-container *ngIf="!isLoggedIn">
        <button routerLink="/login" class="text-[#2da44e] hover:text-white border border-[#2da44e] hover:bg-[#2da44e] font-medium rounded-md text-sm px-4 py-2 w-full mb-2 transition-colors">Login</button>
        <button routerLink="/register" class="text-white bg-[#2da44e] hover:bg-[#2c974b] font-medium rounded-md text-sm px-4 py-2 w-full mb-2 transition-colors">Register</button>
      </ng-container>
      <ng-container *ngIf="isLoggedIn">
        <button mat-icon-button [matMenuTriggerFor]="notificationMenu" class="relative w-full text-left pl-4 py-2 border border-gray-300 rounded-lg">
          <mat-icon>notifications</mat-icon>
          <span class="absolute top-2 left-10">Notifications</span>
          <span class="absolute right-4 top-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center" *ngIf="notificationCount > 0">{{notificationCount}}</span>
        </button>
        <button (click)="logout()" class="text-red-700 hover:text-white border border-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center w-full mb-2 dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600 dark:focus:ring-red-900">Logout</button>
      </ng-container>
    </div>
  </div>
</div>